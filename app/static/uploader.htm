<!-- <form id        =  "uploadForm"
     enctype   =  "multipart/form-data"
     action    =  "/profile"
     method    =  "post"
>
<input type="file" name="avatar" />
<input type="submit" value="Upload Image" name="submit">
</form> -->
<link href="css/bootstrap.css" rel="stylesheet" />
<link href="css/nodo.css" rel="stylesheet" />
<form name="escalamientoForm" method="post" action="accion.php" enctype="multipart/form-data">    

            <div class="row">
        <label for="fileToUpload">Select a File to Upload</label><br />
        <input type="file" ng-model-instant id="fileToUpload" multiple onchange="angular.element(this).scope().setFiles(this)" />
    </div>
    <div id="dropbox" class="dropbox" ng-class="dropClass"><span>{{dropText}}</span></div>
    <div ng-show="files.length">
        <div ng-repeat="file in files.slice(0)">
            <span>{{file.webkitRelativePath || file.name}}</span>
            (<span ng-switch="file.size > 1024*1024">
                <span ng-switch-when="true">{{file.size / 1024 / 1024 | number:2}} MB</span>
                <span ng-switch-default>{{file.size / 1024 | number:2}} kB</span>
            </span>)
        </div>
        <input type="button" ng-click="IniciaCarga()" value="Upload" />
        <div ng-show="progressVisible">
            <div class="percent">{{progress}}%</div>
            <div class="progress-bar">
                <div class="uploaded" ng-style="{'width': progress+'%'}"></div>
            </div>
        </div>
    </div>      
            <!-- <div>
               <input type="file"  class="btn btn-info" multiple> </br>
             </div>-->
         
           <!-- <div class="form-group">
                <label class="control-label">Seleccionar XML</label></br>
              <input id="input" type="file" class="btn btn-info">
            </div>

            <div class="form-group">
      
              <label class="control-label">Seleccionar PDF</label></br>
              <input id="input2" type="file" class="btn btn-info">
              
            </div>
            <div class="form-group">
               <button class="btn btn-info" type="submit" ng-click="upSubeDocumento()">Cargar</button> </br></br>
            </div>-->

            </div>
              <object id="ifDocument" data="http://192.168.20.9/GA_Centralizacion/CuentasXPagar/TempPdf/OrdenCompra/Orden_AU-AUA-VIG-OT-PE-22.pdf" type="application/pdf" width="100%" height="70%"></object>
            </div> 

             
        </form>    
<!--<form 
id        =  "uploadForm"
enctype   =  "multipart/form-data"
action    =  "/profile"
method    =  "post">

<div class="row" style="width:700;height:500px;">
	<input class="form-control" type="text" id="labelArchivo" placeholder="Seleccione un archivo.." readonly>
</div>
<div cg-busy="myPromise" ng-init="init()">
<div class="row" style="width:700;height:500px;">
	
	<div class="col-md-6">
	</div>
	<div class="col-md-6">
		<input class="form-control" type="text" id="labelArchivo" placeholder="Seleccione XML" readonly>
	</div>
	<div class="col-md-6">
		<span class="btn btn-primary btn-file">
			Elegir Archivo XML: 
			<input type="file" id="fileDoc" name="avatar" multiple> </br>					
		</span>		
		<button class="btn btn-info" type="submit" onclick="IniciaCarga()">Cargar</button>
	</div>
	
</div>
<div class="row" style="width:700;height:500px;">
	<div class="progress" id="progressDiv">
  		 <div class="progress-bar progress-bar-success progress-bar-striped active" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
        
    		</div>
	</div>
</div>



</div>
</form>
-->
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/bootstrap.js"></script>
 <script type="text/javascript">
$(document).on('change', '.btn-file :file', function() {
	var input = $(this),
	numFiles = input.get(0).files ? input.get(0).files.length : 1,
	label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
	input.trigger('fileselect', [numFiles, label]);
});

$(document).ready( function() {
	$('.btn-file :file').on('fileselect', function(event, numFiles, label) {
		//console.log(numFiles);
		
		console.log(label);
		$('#labelArchivo').val(label);
		parent.setName(label);
	});

});
/////////////////SEGUNDA OPCION DE SUBIR ARCHIVO ////////////////////////////////
$(document).on('change', '.btn-file2 :file', function() {
	var input = $(this),
	numFiles = input.get(0).files ? input.get(0).files.length : 1,
	label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
	input.trigger('fileselect', [numFiles, label]);
});

$(document).ready( function() {
	$('.btn-file2 :file').on('fileselect', function(event, numFiles, label) {
		//console.log(numFiles);		
		console.log(label);
		$('#labelArchivoPDF').val(label);
		parent.setName(label);
	});

});
////////////////////////////////////////////////////////////////////////////////////////
var IniciaCarga = function(){
	
	
	/*var x = $("#fileDoc")[0].files[0];
	  var value = 0;
	  var interval = setInterval(function() {
	      value += 1;
	      $("#progress-bar")
	      .css("width", value + "%")
	      .attr("aria-valuenow", value)
	      .text(value + "%");
	      if (value >= 99)
	          clearInterval(interval);
	  }, $("#fileDoc")[0].files[0].size / 1000000 );*/
var formData = new FormData();
              
        for (var i in scope.files) {
            formData.append("uploadedFile", scope.files[i]);
        }
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "/fileupload");
        scope.progressVisible = true;
        xhr.send(fd);
   

};

function uploadProgress(evt) {
        scope.$apply(function(){
            if (evt.lengthComputable) {
                scope.progress = Math.round(evt.loaded * 100 / evt.total);
            } else {
                scope.progress = 'unable to compute';
            }
        });
    };

    function uploadComplete(evt) {
        /* This event is raised when the server send back a response */
        alert(evt.target.responseText);
    };

    function uploadFailed(evt) {
        alert("There was an error attempting to upload the file.");
    };

    function uploadCanceled(evt) {
        scope.$apply(function(){
            scope.progressVisible = false;
        });
        alert("The upload has been canceled by the user or the browser dropped the connection.");
    };

    $scope.setFiles = function(element) {
        $scope.$apply(function(scope) {
            console.log('files:', element.files);
      // Turn the FileList object into an Array
            $scope.files = []
            for (var i = 0; i < element.files.length; i++) {
                $scope.files.push(element.files[i]);
            }
          $scope.progressVisible = false;
      });
    };

</script>
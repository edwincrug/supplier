<link href="../../css/orden.css" rel="stylesheet" />

<div id="InitingPage">

<div cg-busy="myPromise" ng-init="init()">
    <div class="form-group"  >

        

        <div id="contenedor" >


           <h1>PORTAL PROVEEDORES</h1>
                <tabset id="tabs">  <!-- PRIMER PESTAÑA -->
            <tab select="alertMe()" heading=" Ordenes Pendientes " >  
                    <div >                    
                               
                        <table align="center"  >                         
                         </br>
                         <tr align="center">
                            <td class="container">
                                

                                <div class="form-group">                                    
                                    
                                    <label>Orden de compra: <input ng-model="listaPendiente.oce_folioorden" ></label>                                                                                                           
                                </div>  
                            </td>
                            <td  class="container">  
                                                                 
                                <div class="form-group">
                                    <label for="Empresa">Empresa</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownEmpresas1" data-toggle="dropdown" aria-haspopup="true"  aria-expanded="true">
                                        {{OpcionDefaultEmpresa}}{{ currentEmpresa.emp_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownEmpresa1">
                                             <li ng-repeat="tipo in listaEmpresas"><a ng-click="getSucursal(tipo)">{{ tipo.emp_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>                           
    
                            </td>
                            <td class="container">
                                <div class="form-group">
                                    <label for="Sucursal">Sucursal</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownSucursal1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        {{OpcionDefaultSucursal}}{{ currentSucursal.suc_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownSucursal1">
                                            <li ng-repeat="tipo in listaSucursales"><a ng-click="setSucursal(tipo)">{{ tipo.suc_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                            <td class="container">

                                
                               
                            </td>

                         </tr>
                     </table>  </br>

                    </div>
                    <div >   

                     <table  class="table table-striped table-bordered" id="tablaPendientes" > 
                        <thead> 
                            <tr>                           
                                 <th id="thCompra">Compra</th> 
                                <th id="thDetalle">Detalle</th> 
                                <th id="thImporte">Importe</th> 
                                 <th>Adjuntar Factura</th>                             
                             </tr> 
                       </thead> 
                        <tbody > 
                        <tr ng-repeat="Pendiente in listaPendiente | filter:listaPendiente.oce_folioorden"> 
                         
                            <td> <a href="" ng-click="verFactura(Pendiente)" >{{tituloGrid}} {{ Pendiente.oce_folioorden }}</a> </br>
                                 {{ Pendiente.emp_nombre }} 
                                 </br>{{ Pendiente.per_rfc }}
                             </td> 
                            <td>{{ Pendiente.suc_nombre }} </br>
                                 {{ Pendiente.dep_nombre }} 
                            </td>
                            <td>{{ Pendiente.oce_importetotal | currency:"$" }}</td>                                                       
                            <td>                                                                                                    
                                
                              <!-- <button class="btn btn-primary" type="button" id="btnAdjuntarPendiente">
                                    <span class="glyphicon glyphicon-paperclip" ng-controller="uploadController" aria-hidden="true" ng-click="ShowCargar(Pendiente)">SubirArchivos</span>
                                </button>
                                 <button class="btn btn-primary" type="button" id="btnAdjuntarPendiente">
                                    <span class="glyphicon glyphicon-paperclip" ng-controller="uploadController" aria-hidden="true" ng-click="upFactura(Pendiente)">SubirArchivos</span>
                                </button>
                               <button class="btn btn-primary" type="button" id="btnAdjuntarPendiente">
                                    <span class="glyphicon glyphicon-paperclip" ng-controller="uploadController" aria-hidden="true" ng-click="toggleModal()">SubirArchivos</span>
                                </button>-->
                                <button class="btn btn-primary" type="button" id="btnAdjuntarPendiente">
                                    <span class="glyphicon glyphicon-paperclip" aria-hidden="true" ng-click="verFactura2(Pendiente)">SubirArchivos</span>
                                </button>
                                
                            </td>                             
                        </tr> 
                      </tbody> 
                   </table>
                   <!--<table align="center">
                       <tr align="center">
                           <td align="center">
                               Ver <select ng-model="viewby" ng-change="setItemsPerPage(viewby)"><option>5</option><option>10</option><option>20</option><option>30</option><option>40</option><option>50</option></select> registros de {{totalPendientes}}
                           </td>
                           
                       </tr>
                       <tr>
                           <td>
                               <pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages" items-per-page="itemsPerPage" align="center"></pagination>
                               
                           </td>
                       </tr>
                       <tr align="center">
                           <td>
                               Pagina: {{currentPage}} de {{numPages}}
                           </td>
                       </tr>
                   </table>-->
                  <!-- <pre align="center">Pagina: {{currentPage}} de {{numPages}}</pre>-->           
                </div>
              
            </tab>
            
           <!-- SEGUNDA PESTAÑA-->
             <tab select="alertMe()" heading=" Ordenes Validadas "> 
                <div>
                       
                     <table align="center"  >                         
                         </br>
                         <tr align="center">
                            <td class="container">
                                

                                <div class="form-group">                                    
                                    
                                    <label>Orden de compra: <input ng-model="buscarTextV" ></label>                                                                                                           
                                </div>  
                            </td>
                            <td  class="container">  
                                                                 
                                <div class="form-group">
                                    <label for="Empresa">Empresa</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownEmpresas2" data-toggle="dropdown" aria-haspopup="true"  aria-expanded="true">
                                        {{OpcionDefaultEmpresaV}}{{ currentEmpresaV.emp_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownEmpresa2">
                                             <li ng-repeat="tipo in listaEmpresasV"><a ng-click="getSucursalV(tipo)">{{ tipo.emp_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>                           
    
                            </td>
                            <td class="container">
                                <div class="form-group">
                                    <label for="Sucursal">Sucursal</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownSucursal2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        {{OpcionDefaultSucursalV}}{{ currentSucursalV.suc_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownSucursal2">
                                            <li ng-repeat="tipo in listaSucursalesV"><a ng-click="setSucursalV(tipo)">{{ tipo.suc_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                            <td class="container">

                                
                               
                            </td>

                         </tr>
                     </table>  </br>

              </div>
              <div>               
                <table class="table table-striped table-bordered" id="tablaValidadas" > 
                    <thead> 
                        <tr> 
                            <th id="thCompra">Orden De Compra</th> 
                            <th id="thDetalle">Detalle</th> 
                            <th id="thImporte">Importe</th> 
                            <th id="thFactura">Factura</th>    
                            <th id="thFValidacion">Fecha Validacion</th>  
                            <th id="thfFactura">Fecha Factura</th>  
                            <th id="thRecepcion">Recepción</th> 
                            <th id="thRecepcion">Estatus</th>  
                            <th>Sustituir Factura</th>                      
                        </tr> 
                    </thead> 
                    <tbody> 
                        <tr ng-repeat="validada in listaValidadas | filter:buscarTextV"> 

                        <!--PAGINACION <tr ng-repeat="validada in listaValidadas.slice(((currentPageV-1)*itemsPerPageV), ((currentPageV)*itemsPerPageV)) | filter:buscarTextV"> -->
                            <td >
                                 <a href="" ng-click="verFactura(validada)" > 
                                 {{ validada.ppro_nombrearchivo }}</a> </br>             
                                 {{ validada.emp_nombre }} </br>
                                 {{ validada.per_rfc }}
                             </td> 
                            <td >
                                 {{ validada.suc_nombre }} </br>
                                 {{ validada.dep_nombre }}
                             </td> 
                            <td >{{ validada.oce_importetotal | currency:"$"}}</td> 
                            <td >{{ validada.factura }}</td> 
                            <td >{{ validada.fechaValidacion  | date:'MM/dd/yyyy'}}</td>    
                            <td >{{ validada.fecha_factura | date:'MM/dd/yyyy'}}</td> 
                            <td >{{ validada.Recepcion }}</td>    
                            <!--<td >{{ validada.Estatus }}</td> -->
                            <td >{{ validada.Estado }}</td>                                                           
                            <td>
                              <button class="btn btn-primary" type="button" id="btnAdjuntarValidada">
                                    <span class="glyphicon glyphicon-paperclip" aria-hidden="true" ng-click="verFacturaValidada(validada)">SubirArchivos</span>
                                </button>
                            </td>                            
                        </tr> 
                    </tbody> 
                </table>
               <!-- <table align="center">
                       <tr align="center">
                           <td align="center">
                               Ver <select ng-model="viewbyV" ng-change="setItemsPerPageV(viewbyV)"><option>5</option><option>10</option><option>20</option><option>30</option><option>40</option><option>50</option></select> registros de {{totalValidadas}}
                           </td>
                           
                       </tr>
                       <tr>
                           <td>
                               <pagination total-items="totalItemsV" ng-model="currentPageV" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPagesV" items-per-page="itemsPerPageV" align="center"></pagination>
                               
                           </td>
                       </tr>
                       <tr align="center">
                           <td>
                               Pagina: {{currentPageV}} de {{numPagesV}}
                           </td>
                       </tr>
                   </table>-->
             </div>
            </tab>
            <!-- PESTAÑA NUMERO 3-->
         
            <!--     CUARTA PESTAÑA 4 -->
            <tab select="alertMe()" heading=" Ordenes Pagadas " >
                  <div>
                      
                       <table align="center"  >                         
                         </br>
                         <tr align="center">
                            <td class="container">
                                

                                <div class="form-group">                                    
                                    
                                    <label>Orden de compra: <input ng-model="buscarTextP" ></label>                                                                                                           
                                </div>  
                            </td>
                            <td  class="container">  
                                                                 
                                <div class="form-group">
                                    <label for="Empresa">Empresa</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownEmpresas4" data-toggle="dropdown" aria-haspopup="true"  aria-expanded="true">
                                        {{OpcionDefaultEmpresaP}}
                                        {{ currentEmpresaP.emp_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownEmpresa4">
                                             <li ng-repeat="tipo in listaEmpresasP"><a ng-click="getSucursalP(tipo)">{{ tipo.emp_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>                           
    
                            </td>
                            <td class="container">
                                <div class="form-group">
                                    <label for="Sucursal">Sucursal</label>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="DropdownSucursal4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        {{OpcionDefaultSucursalP}}
                                        {{ currentSucursalP.suc_nombre }}<span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="DropdownSucursal4">
                                            <li ng-repeat="tipo in listaSucursalesP"><a ng-click="setSucursalP(tipo)">{{ tipo.suc_nombre }}</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                            <td class="container">

                                
                               
                            </td>

                         </tr>
                     </table>  </br> 

              </div> 
                 <div>                         
                     <table  class="table table-striped table-bordered" id="tablaPagadas"  > 
                        <thead> 
                            <tr>                           
                                 <th id="thCompra">Compra</th> 
                                <th id="thDetalle">Detalle</th> 
                                <th id="thImporte">Importe</th> 
                                                           
                             </tr> 
                       </thead> 
                        <tbody > 
                         <tr ng-repeat="Pagadas in listaPagadas| filter:buscarTextP"> 
                        <!-- <tr ng-repeat="Pagadas in listaPagadas.slice(((currentPageP-1)*itemsPerPageP), ((currentPageP)*itemsPerPageP)) | filter:buscarTextP"> -->
                            <td> <a href="" ng-click="verFactura(Pagadas)" > 
                                 {{ Pagadas.oce_folioorden }}</a> </br>
                                 {{ Pagadas.emp_nombre }} 
                                 </br>
                                 {{ Pagadas.per_rfc }}
                             </td> 
                            <td>
                                 {{ Pagadas.suc_nombre }} </br>
                                 {{ Pagadas.dep_nombre }} 
                            </td>
                            <td>
                                 {{ Pagadas.oce_importetotal | currency:"$"}}</td>                                                       
                                                         
                        </tr> 
                      </tbody> 
                   </table>
                   <!--<table align="center">
                       <tr align="center">
                           <td align="center">
                               Ver <select ng-model="viewbyP" ng-change="setItemsPerPageP(viewbyP)"><option>5</option><option>10</option><option>20</option><option>30</option><option>40</option><option>50</option></select> registros de {{totalPagadas}}
                           </td>
                           
                       </tr>
                       <tr>
                           <td>
                               <pagination total-items="totalItemsP" ng-model="currentPageP" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPagesP" items-per-page="itemsPerPageP" align="center"></pagination>
                               
                           </td>
                       </tr>
                       <tr align="center">
                           <td>
                               Pagina: {{currentPageP}} de {{numPagesP}}
                           </td>
                       </tr>
                   </table>-->
                  <!-- <pre align="center">Pagina: {{currentPage}} de {{numPages}}</pre>-->
                       
                               
                </div>
            </tab>
                </tabset>
        </div>
    </div>
</div>




<div class="modal fade" id="viewNewEscalamiento" >
  <div class="modal-dialog" >
    <div class="modal-content" style="height:700px;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"  aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Subir Documento</h4>
      </div>
      <div class="modal-body">
        <form name="escalamientoForm" method="post" action="accion.php" enctype="multipart/form-data">    

            <div class="row">
        <label for="fileToUpload">Select a File to Upload</label><br />
        <input type="file" ng-model-instant id="fileToUpload" multiple onchange="angular.element(this).scope().setFiles(this)" />
    </div>
    <div id="dropbox" class="dropbox" ng-class="dropClass"><span>{{dropText}}</span></div>
    <div ng-show="files.length">
        <div ng-repeat="file in files.slice(0)">
            <span>{{file.webkitRelativePath || file.name}}</span>
            (<span ng-switch="file.size > 1024*1024">
                <span ng-switch-when="true">{{file.size / 1024 / 1024 | number:2}} MB</span>
                <span ng-switch-default>{{file.size / 1024 | number:2}} kB</span>
            </span>)
        </div>
        <input type="button" ng-click="uploadFile()" value="Upload" />
        <div ng-show="progressVisible">
            <div class="percent">{{progress}}%</div>
            <div class="progress-bar">
                <div class="uploaded" ng-style="{'width': progress+'%'}"></div>
            </div>
        </div>
    </div>      
            <!-- <div>
               <input type="file"  class="btn btn-info" multiple> </br>
             </div>-->
         
           <!-- <div class="form-group">
                <label class="control-label">Seleccionar XML</label></br>
              <input id="input" type="file" class="btn btn-info">
            </div>

            <div class="form-group">
      
              <label class="control-label">Seleccionar PDF</label></br>
              <input id="input2" type="file" class="btn btn-info">
              
            </div>
            <div class="form-group">
               <button class="btn btn-info" type="submit" ng-click="upSubeDocumento()">Cargar</button> </br></br>
            </div>-->
 </div>
              <object id="ifDocument" data="http://http://192.168.20.9:3700/" type="application/pdf" width="100%" height="70%"></object>
            </div> 
            <!--</div>
              <object id="ifDocument" data="http://192.168.20.9/GA_Centralizacion/CuentasXPagar/TempPdf/OrdenCompra/Orden_AU-AUA-VIG-OT-PE-22.pdf" type="application/pdf" width="100%" height="70%"></object>
            </div> -->

             
        </form>     
      </div>                                                                                 
      
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->  



